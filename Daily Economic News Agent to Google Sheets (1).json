{
  "name": "Daily Economic News Agent to Google Sheets",
  "nodes": [
    {
      "parameters": {
        "triggerTimes": {
          "item": [
            {
              "hour": 9
            }
          ]
        }
      },
      "name": "Cron Trigger: 9 AM Daily",
      "type": "n8n-nodes-base.cron",
      "typeVersion": 1,
      "position": [
        -208,
        -320
      ],
      "id": "0ac11857-ec51-4b02-835a-db1e2f161053"
    },
    {
      "parameters": {
        "jsCode": "// AIì˜ ì¶œë ¥ê°’ ê°€ì ¸ì˜¤ê¸° (output í˜¹ì€ text í•„ë“œ í™•ì¸)\n// Critic Agentì˜ ê²°ê³¼ëŠ” ë³´í†µ $json.outputì— ë‹´ê¹ë‹ˆë‹¤.\nconst rawResult = $json.output || $json.text || $json.response || \"\";\n\nlet parsedJson = [];\n\ntry {\n  // === 1ë‹¨ê³„: ë¬¸ìì—´ í™•ë³´ ë° ì „ì²˜ë¦¬ ===\n  let cleanString = \"\";\n\n  if (typeof rawResult === 'object') {\n    // ë§Œì•½ ìš´ ì¢‹ê²Œ ì´ë¯¸ ê°ì²´ë¼ë©´ ë°”ë¡œ ì‚¬ìš©\n    parsedJson = Array.isArray(rawResult) ? rawResult : [rawResult];\n  } else {\n    // ë¬¸ìì—´ì´ë¼ë©´ ì²˜ë¦¬ ì‹œì‘\n    cleanString = rawResult.toString();\n    \n    // === 2ë‹¨ê³„: JSON ì¶”ì¶œ (ì™¸ê³¼ ìˆ˜ìˆ ) ===\n    // ëŒ€ê´„í˜¸ [ ë¡œ ì‹œì‘í•´ì„œ ] ë¡œ ëë‚˜ëŠ” íŒ¨í„´ì„ ì°¾ìŠµë‹ˆë‹¤.\n    // ì•ë’¤ì— ë¶™ì€ \"Here is the code...\" ê°™ì€ ì‚¬ì¡±ì„ ë¬´ì‹œí•©ë‹ˆë‹¤.\n    const jsonMatch = cleanString.match(/\\[[\\s\\S]*\\]/);\n    \n    if (jsonMatch) {\n      cleanString = jsonMatch[0]; // ë§¤ì¹­ëœ JSON ë¶€ë¶„ë§Œ ì¶”ì¶œ\n    } else {\n      // ëŒ€ê´„í˜¸ê°€ ì—†ë‹¤ë©´ ê°ì²´ {} í˜•íƒœì¼ ìˆ˜ë„ ìˆìœ¼ë‹ˆ ì‹œë„\n      const objMatch = cleanString.match(/\\{[\\s\\S]*\\}/);\n      if (objMatch) {\n        cleanString = \"[\" + objMatch[0] + \"]\"; // ë°°ì—´ë¡œ ê°•ì œ ë³€í™˜\n      } else {\n        throw new Error(\"JSON í˜•ì‹ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.\");\n      }\n    }\n\n    // === 3ë‹¨ê³„: íŒŒì‹± ===\n    parsedJson = JSON.parse(cleanString);\n  }\n\n} catch (error) {\n  // ì—ëŸ¬ ë°œìƒ ì‹œ ì›Œí¬í”Œë¡œìš°ë¥¼ ë©ˆì¶”ì§€ ì•Šê³  ì—ëŸ¬ ë¡œê·¸ë¥¼ ë°˜í™˜í•˜ë„ë¡ ì²˜ë¦¬\n  return [{\n    json: {\n      error: \"JSON íŒŒì‹± ì‹¤íŒ¨\",\n      message: error.message,\n      raw_data: rawResult // ë¬´ì—‡ ë•Œë¬¸ì— ì—ëŸ¬ë‚¬ëŠ”ì§€ ì›ë³¸ í™•ì¸ìš©\n    }\n  }];\n}\n\n// === 4ë‹¨ê³„: ë°ì´í„° ë§¤í•‘ (Google Sheets í¬ë§· ë§ì¶”ê¸°) ===\n// íŒŒì‹±ëœ ë°ì´í„°ê°€ ë°°ì—´ì´ ì•„ë‹ˆë©´ ë°°ì—´ë¡œ ë³€í™˜\nif (!Array.isArray(parsedJson)) {\n  parsedJson = [parsedJson];\n}\n\nreturn parsedJson.map(item => {\n  // ìš©ì–´(terms) ë°°ì—´ ì•ˆì „í•˜ê²Œ ì²˜ë¦¬\n  const terms = Array.isArray(item.terms) ? item.terms : [];\n  \n  // ìš©ì–´ 1~5 ì•ˆì „í•˜ê²Œ ë§¤í•‘ (ì—†ìœ¼ë©´ ë¹ˆì¹¸)\n  const term1 = terms[0] || {};\n  const term2 = terms[1] || {};\n  const term3 = terms[2] || {};\n  const term4 = terms[3] || {};\n  const term5 = terms[4] || {};\n  \n  return {\n    json: {\n      title: item.title || 'ì œëª© ì—†ìŒ',\n      date: item.date || new Date().toISOString().split('T')[0],\n      source_url: item.source_url || 'ë§í¬ ì—†ìŒ',\n      // ìš”ì•½ë¬¸ì—ì„œ ë¶ˆí•„ìš”í•œ ì¤„ë°”ê¿ˆ ì œê±°\n      summary: (item.summary || '').replace(/\\n/g, ' '),\n      key_metrics: item.key_metrics || 'ì§€í‘œ ì—†ìŒ',\n      \n      // ìš©ì–´ ë§¤í•‘ (ë¹ˆ ê°’ì¼ ê²½ìš° ì—ëŸ¬ ë°©ì§€)\n      term1_name: term1.term || '',\n      term1_definition: term1.definition || '',\n      term1_explanation: term1.explanation || '',\n      \n      term2_name: term2.term || '',\n      term2_definition: term2.definition || '',\n      term2_explanation: term2.explanation || '',\n      \n      term3_name: term3.term || '',\n      term3_definition: term3.definition || '',\n      term3_explanation: term3.explanation || '',\n      \n      term4_name: term4.term || '',\n      term4_definition: term4.definition || '',\n      term4_explanation: term4.explanation || '',\n      \n      term5_name: term5.term || '',\n      term5_definition: term5.definition || '',\n      term5_explanation: term5.explanation || '',\n      \n      created_at: new Date().toISOString()\n    }\n  };\n});"
      },
      "name": "Code: Prepare Data for Sheet",
      "type": "n8n-nodes-base.code",
      "typeVersion": 1,
      "position": [
        608,
        -96
      ],
      "id": "20da61eb-02bf-4220-8a5a-37b05585429e",
      "alwaysOutputData": false
    },
    {
      "parameters": {
        "operation": "append",
        "sheetId": "1PbiJiUvgA7YBMATngEgeJK3efGz5f57ZLocisG1bWOQ",
        "range": "ë‰´ìŠ¤ì •ë¦¬!A:U",
        "options": {
          "usePathForKeyRow": true
        }
      },
      "name": "Google Sheets: Add Data",
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 2,
      "position": [
        608,
        80
      ],
      "id": "77b8fd54-3f44-4c62-964d-347a2668f65e",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "JNCipej7yrOZFQaU",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "==ë‹¤ìŒì˜ Perplexity AI ê²½ì œ ë‰´ìŠ¤ ê²°ê³¼ë¥¼ ë¶„ì„í•´ì„œ, ì •í™•íˆ 1ê±´ì˜ ë‰´ìŠ¤ë¥¼ JSON ë°°ì—´ í˜•ì‹ìœ¼ë¡œ ì¶œë ¥í•´ì£¼ì„¸ìš”.\n\n**ì…ë ¥ ë°ì´í„°**: {{ $json.choices[0].message.content }}\n**ì˜¤ëŠ˜ ë‚ ì§œ**: {{ $now.format('yyyy-MM-dd') }}\n\nê° ë‰´ìŠ¤ë§ˆë‹¤ ë‹¤ìŒì„ í¬í•¨ (JSON Key ì¤€ìˆ˜):\n1. title: ë‰´ìŠ¤ ì œëª©\n2. date: ë‚ ì§œ (YYYY-MM-DD í˜•ì‹) -> **ì¤‘ìš”: ë‚ ì§œê°€ {{ $now.minus(100, 'days').format('yyyy-MM-dd') }} ì´ì „ì´ë¼ë©´ í•´ë‹¹ ë‰´ìŠ¤ëŠ” ë²„ë¦¬ê³  ë¹ˆ ë°°ì—´ []ì„ ì¶œë ¥í•˜ì„¸ìš”.**\n3. source_url: ê¸°ì‚¬ì˜ ì›ë¬¸ ë§í¬ (URL) -> ë°˜ë“œì‹œ í¬í•¨í•  ê²ƒ\n4. summary: í•µì‹¬ ë‚´ìš© 3-5ì¤„ ìš”ì•½\n5. key_metrics: ì¤‘ìš” ì§€í‘œë‚˜ ìˆ«ì\n6. terms: ê²½ì œ ìš©ì–´ ê°ì²´ 2ê°œê°€ ë‹´ê¸´ ë°°ì—´ (term, definition, explanation í¬í•¨)\n\n**ì¶œë ¥ í˜•ì‹ ì˜ˆì‹œ**:\n[\n  {\n    \"title\": \"...\",\n    \"date\": \"2025-11-27\",\n    \"source_url\": \"https://news.naver.com/...\",\n    \"summary\": \"...\",\n    \"key_metrics\": \"...\",\n    \"terms\": [ ... ]\n  }\n]\n\n**ì¤‘ìš”**: \n- source_url í•„ë“œë¥¼ ë°˜ë“œì‹œ í¬í•¨í•˜ì„¸ìš”.",
        "hasOutputParser": true,
        "options": {
          "systemMessage": "ë‹¹ì‹ ì€ ê²½ì œ ì´ˆë³´ìë¥¼ ìœ„í•œ ê²½ì œ ë‰´ìŠ¤ ë¶„ì„ ì „ë¬¸ê°€ì…ë‹ˆë‹¤. ë³µì¡í•œ ê²½ì œ ê¸°ì‚¬ë¥¼ ì‰½ê²Œ í’€ì–´ì„œ ì„¤ëª…í•˜ê³ , ì´í•´ë¥¼ ë•ëŠ” ì´ˆë³´ìë„ ì´í•´í•  ìˆ˜ ìˆëŠ” ì˜ˆì‹œì™€ í•¨ê»˜ ì„¤ëª…í•©ë‹ˆë‹¤. ì™„ì „ ì •í™•í•˜ê³  ì¬ì±„ìš´ ê²½ë¬¸ì„ ì–¸ê¸‰í•˜ë©°, ì£¼ì–´ì§„ ì¶œë ¥ ê²½ì„ì„ ì—„ê²©íˆ ë”°ë¦…ë‹ˆë‹¤. JSON ì¶œë ¥ì‹œ ë°˜ë“œì‹œ ìœ íš¨í•œ JSON í˜•ì‹ì„ ì‚¬ìš©í•˜ê³ , ê° ë‰´ìŠ¤ë§ˆë‹¤ ê´€ë ¨ëœ 2ê°€ì˜ ìš©ì–´ë¥¼ í¬í•¨ì‹œí‚µë‹ˆë‹¤."
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 3,
      "position": [
        -240,
        -80
      ],
      "id": "3c59ea65-3626-47b0-bb46-262609f80867",
      "name": "AI Agent"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "typeVersion": 1,
      "position": [
        -240,
        192
      ],
      "id": "e4289283-03e4-4044-b4a4-d25b41329f90",
      "name": "Google Gemini Chat Model",
      "credentials": {
        "googlePalmApi": {
          "id": "gndEkl9rPh0IuA3t",
          "name": "Google Gemini(PaLM) Api account"
        }
      }
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1PbiJiUvgA7YBMATngEgeJK3efGz5f57ZLocisG1bWOQ",
          "mode": "list",
          "cachedResultName": "n8nê²½ì œë‰´ìŠ¤",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1PbiJiUvgA7YBMATngEgeJK3efGz5f57ZLocisG1bWOQ/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": "ë‰´ìŠ¤ì •ë¦¬",
          "mode": "name"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        -16,
        -320
      ],
      "id": "70645668-0ae3-4d71-a603-eb4e02c7d648",
      "name": "Get row(s) in sheet",
      "alwaysOutputData": true,
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "JNCipej7yrOZFQaU",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "// Google Sheetsì—ì„œ ê°€ì ¸ì˜¨ ì „ì²´ ë°ì´í„° ì½ê¸°\nconst items = $input.all();\n\n// === ì„¤ì • ì˜ì—­ ===\n// ì¤‘ë³µ ê²€ì‚¬ë¥¼ ìœ„í•´ ë’¤ì—ì„œë¶€í„° ëª‡ ê°œì˜ ë°ì´í„°ë¥¼ í™•ì¸í• ì§€ ì„¤ì •í•©ë‹ˆë‹¤.\n// 15ê°œ ì •ë„ë©´ ìµœê·¼ ë©°ì¹  ê°„ì˜ ë‰´ìŠ¤ë¥¼ ì»¤ë²„í•˜ë¯€ë¡œ ì¶©ë¶„í•©ë‹ˆë‹¤.\nconst CHECK_LIMIT = 15; \n// =================\n\nlet recentTitles = [];\n\n// ë°ì´í„°ê°€ ì—†ìœ¼ë©´ ë¹ˆ ê°’ ë°˜í™˜\nif (items.length === 0) {\n  return [{ json: { excluded_titles: \"ì—†ìŒ\" } }];\n}\n\n// ì „ì²´ ë°ì´í„° ì¤‘ 'ê°€ì¥ ìµœê·¼(ë’¤ìª½)' ë°ì´í„° Nê°œë§Œ ì˜ë¼ëƒ…ë‹ˆë‹¤. (Sliding Window ê¸°ë²•)\n// ë°°ì—´ì˜ ëì—ì„œë¶€í„° CHECK_LIMIT ë§Œí¼ë§Œ ê°€ì ¸ì˜µë‹ˆë‹¤.\nconst recentItems = items.slice(-CHECK_LIMIT);\n\n// ì˜ë¼ë‚¸ ìµœê·¼ ë°ì´í„°ì—ì„œ ì œëª©ë§Œ ì¶”ì¶œ\nrecentItems.forEach(item => {\n  const json = item.json;\n  if(json.title) {\n    recentTitles.push(json.title);\n  }\n});\n\n// Perplexityê°€ ì¸ì‹í•˜ê¸° ì¢‹ê²Œ ë”°ì˜´í‘œë¡œ ê°ì‹¸ê³  ì‰¼í‘œë¡œ êµ¬ë¶„\n// ì˜ˆ: \"ì œëª©1\", \"ì œëª©2\", \"ì œëª©3\"\n  const uniqueTitles = recentTitles.join(\", \");\n// 'excluded_words'(ìš©ì–´)ëŠ” ë‰´ìŠ¤ ì¤‘ë³µ ì„ ì •ê³¼ ë¬´ê´€í•˜ë¯€ë¡œ í† í° ì ˆì•½ì„ ìœ„í•´ ì œê±°í–ˆìŠµë‹ˆë‹¤.\n// ì˜¤ì§ 'excluded_titles'ë§Œ ë‹¤ìŒ ë…¸ë“œë¡œ ë„˜ê¹ë‹ˆë‹¤.\nreturn [{ \n  json: { \n    excluded_titles: uniqueTitles \n  } \n}];"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        176,
        -320
      ],
      "id": "cb6edee2-beb4-4114-827f-d4d602c00f4f",
      "name": "Code in JavaScript"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "typeVersion": 1,
      "position": [
        112,
        176
      ],
      "id": "e2b7a455-6005-4f79-b250-bc3975904dc8",
      "name": "Google Gemini Chat Model1",
      "credentials": {
        "googlePalmApi": {
          "id": "gndEkl9rPh0IuA3t",
          "name": "Google Gemini(PaLM) Api account"
        }
      }
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "===ë‹¹ì‹ ì€ ê¼¼ê¼¼í•œ 'ê²½ì œ ë‰´ìŠ¤ í¸ì§‘ì¥'ì´ì 'ë°ì´í„° ê²€ìˆ˜ì'ì…ë‹ˆë‹¤. \nì´ì „ ë‹¨ê³„ì˜ AIê°€ ì‘ì„±í•œ ê²½ì œ ë‰´ìŠ¤ JSON ë°ì´í„°ë¥¼ ê²€í† í•˜ê³  ìˆ˜ì •í•´ì•¼ í•©ë‹ˆë‹¤.\n\n**ì…ë ¥ ë°ì´í„°**: \n{{ $json.output }}\n\n**ìˆ˜í–‰í•´ì•¼ í•  ì‘ì—…**:\n1. **ë‚´ìš© ê²€ì¦**: ê° ë‰´ìŠ¤ì˜ ìš”ì•½ì´ í•µì‹¬ì„ ì°Œë¥´ê³  ìˆëŠ”ì§€, 'key_metrics'ì— ìˆ«ìê°€ ì •í™•í•œì§€ í™•ì¸í•˜ì„¸ìš”.\n2. **ìš©ì–´ ì„¤ëª…(Terms) ì‹¬ì‚¬**: ì„¤ëª…ì´ ì´ˆë³´ìì—ê²Œ ë„ˆë¬´ ì–´ë µê±°ë‚˜ ë¶€ì •í™•í•˜ë©´, ë” ì‰½ê³  ì •í™•í•˜ê²Œ ìˆ˜ì •í•˜ì„¸ìš”.\n3. **â˜…ìˆ˜ëŸ‰ ê°•ì œ ë§ì¶¤ (ê°€ì¥ ì¤‘ìš”)â˜…**: \n   - 'terms' ë°°ì—´ ì•ˆì— ìš©ì–´ê°€ ì •í™•íˆ **2ê°œ**ì¸ì§€ ì„¸ì–´ë³´ì„¸ìš”.\n   - ë§Œì•½ 1ê°œ ì´í•˜ë¼ë©´, ë‰´ìŠ¤ ë‚´ìš©ê³¼ ê´€ë ¨ëœ ê²½ì œ ìš©ì–´ë¥¼ ë‹¹ì‹ ì´ ì§ì ‘ ìƒì„±í•˜ì—¬ ì¶”ê°€í•˜ì„¸ìš”.\n   - ë§Œì•½ 3ê°œ ì´ìƒì´ë¼ë©´, ê°€ì¥ ëœ ì¤‘ìš”í•œ ê²ƒì„ ì‚­ì œí•˜ì—¬ 2ê°œë¡œ ë§ì¶”ì„¸ìš”.\n   - **ê²°ê³¼ë¬¼ì€ ë¬´ì¡°ê±´ ìš©ì–´ 2ê°œì—¬ì•¼ í•©ë‹ˆë‹¤.**\n\n**âš ï¸ ì ˆëŒ€ ì¤€ìˆ˜ ê·œì¹™ (ì–´ê¸¸ ì‹œ ì‹œìŠ¤í…œ ì˜¤ë¥˜ ë°œìƒ) âš ï¸**:\n1. **ë°ì´í„° ë³´ì¡´ í•„ìˆ˜**: ì…ë ¥ë°›ì€ ë°ì´í„°ì— ë‰´ìŠ¤ ê¸°ì‚¬ê°€ 1ê°œë¼ë©´, ì¶œë ¥ë„ ë°˜ë“œì‹œ 1ê°œì—¬ì•¼ í•©ë‹ˆë‹¤. \n2. **êµ¬ì¡° ìœ ì§€**: JSONì˜ í‚¤(key)ë‚˜ êµ¬ì¡°ë¥¼ ë³€ê²½í•˜ì§€ ë§ˆì„¸ìš”. \n3. **ìˆœìˆ˜ JSON**: Markdown ì½”ë“œ ë¸”ë¡(```json) ì—†ì´ ìˆœìˆ˜í•œ JSON í…ìŠ¤íŠ¸ë§Œ ì¶œë ¥í•˜ì„¸ìš”.\n\"ë§ˆí¬ë‹¤ìš´ ë°±í‹± ì—†ì´ ìˆœìˆ˜í•œ JSON ë°°ì—´ ë°ì´í„°ë§Œ ì¶œë ¥í•˜ì„¸ìš”. ë‹¤ë¥¸ ì„¤ëª…ì€ ì ˆëŒ€ ë¶™ì´ì§€ ë§ˆì„¸ìš”.\"\n(ì¤‘ìš”: ì¶œë ¥ì€ ë°˜ë“œì‹œ '[' ë¡œ ì‹œì‘í•˜ê³  ']'ë¡œ ëë‚˜ì•¼ í•©ë‹ˆë‹¤. 'ì—¬ê¸° ê²°ê³¼ì…ë‹ˆë‹¤' ê°™ì€ ë§ì€ ì ˆëŒ€ í•˜ì§€ ë§ˆì„¸ìš”.)",
        "hasOutputParser": true,
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 3,
      "position": [
        112,
        -80
      ],
      "id": "fbb83ce7-5bbf-4e24-a1e2-1d745f9d73d4",
      "name": "critic agent"
    },
    {
      "parameters": {
        "resource": "databasePage",
        "databaseId": {
          "__rl": true,
          "value": "2b716d8a-25fa-8075-8895-c4fae99c4ab8",
          "mode": "list",
          "cachedResultName": "ğŸ“° ê²½ì œ ë‰´ìŠ¤ ë¸Œë¦¬í•‘",
          "cachedResultUrl": "https://www.notion.so/2b716d8a25fa80758895c4fae99c4ab8"
        },
        "title": "={{ $json.title }}",
        "propertiesUi": {
          "propertyValues": [
            {
              "key": "ë‚ ì§œ|date",
              "date": "={{ $json.date }}"
            }
          ]
        },
        "blockUi": {
          "blockValues": [
            {
              "textContent": "={{ \n\"**ğŸ—ï¸ ì˜¤ëŠ˜ì˜ ë¸Œë¦¬í•‘ (\" + $json.date + \")**\\n\\n\" +\n\n\"**âš¡ 3ì¤„ ìš”ì•½**\\n\" +\n$json.summary + \"\\n\\n\" +\n\n\"**ğŸ“Š ì‹œì¥ í•µì‹¬ ì§€í‘œ**\\n\" +\n\"> \" + $json.key_metrics + \"\\n\\n\" +\n\n\"---\\n\" +\n\"**ğŸ§  ì˜¤ëŠ˜ì˜ ê²½ì œ ì§€ì‹**\\n\\n\" +\n\n\"**â‘  \" + $json.term1_name + \"**\\n\" +\n\"â”” ğŸ“˜ \" + $json.term1_definition + \"\\n\" +\n\"â”” ğŸ’¡ \" + $json.term1_explanation + \"\\n\\n\" +\n\n\"**â‘¡ \" + $json.term2_name + \"**\\n\" +\n\"â”” ğŸ“˜ \" + $json.term2_definition + \"\\n\" +\n\"â”” ğŸ’¡ \" + $json.term2_explanation + \"\\n\\n\" +\n\n\"ğŸ”— [ê¸°ì‚¬ ì›ë¬¸ ë³´ê¸°](\" + $json.source_url + \")\"\n\"---\\n\" +\n\"ğŸ¤– *AI Agentê°€ ì •ë¦¬í•œ ê²½ì œ ë‰´ìŠ¤ì…ë‹ˆë‹¤.*\"\n}}"
            }
          ]
        },
        "options": {}
      },
      "id": "7b86577a-11f9-4883-af17-d6fc3ace3358",
      "name": "Notion: Create Gallery Card",
      "type": "n8n-nodes-base.notion",
      "typeVersion": 2.1,
      "position": [
        608,
        240
      ],
      "credentials": {
        "notionApi": {
          "id": "UEUWVitwjVhfCRQ8",
          "name": "Notion account"
        }
      }
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://api.perplexity.ai/chat/completions",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpBearerAuth",
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={\n  \"model\": \"sonar-pro\",\n  \"messages\": [\n    {\n      \"role\": \"system\",\n      \"content\": \"ë‹¹ì‹ ì€ ê²½ì œ ë‰´ìŠ¤ ì „ë¬¸ ë¶„ì„ê°€ì…ë‹ˆë‹¤. ìµœì‹  ê²½ì œ ë‰´ìŠ¤ë¥¼ ì •í™•í•˜ê³  ìƒì„¸í•˜ê²Œ ì œê³µí•©ë‹ˆë‹¤.\"\n    },\n    {\n      \"role\": \"user\",\n      \"content\": \"ì˜¤ëŠ˜ ë˜ëŠ” ìµœê·¼ 3ì¼ ì´ë‚´ì˜ ì£¼ìš” ê²½ì œ ë‰´ìŠ¤ 1ê±´ì„ ì°¾ì•„ì„œ ê° ë‰´ìŠ¤ë§ˆë‹¤ ë‹¤ìŒ ì •ë³´ë¥¼ í¬í•¨í•´ì„œ ìì„¸íˆ ì•Œë ¤ì£¼ì„¸ìš”:\\n\\n1. ë‰´ìŠ¤ ì œëª©\\n2. ì •í™•í•œ ë‚ ì§œ\\n3. í•µì‹¬ ë‚´ìš© (3-5ì¤„ ë¶„ëŸ‰)\\n4. ì£¼ìš” ê²½ì œ ì§€í‘œë‚˜ ìˆ«ì (ê¸ˆë¦¬, ì£¼ê°€, í™˜ìœ¨ ë“±)\\n5. ë‰´ìŠ¤ì— ë‚˜ì˜¤ëŠ” ê²½ì œ ì´ˆë³´ìê°€ ëª¨ë¥¼ë§Œí•œ ì „ë¬¸ ìš©ì–´ 2ê°œì™€ ê° ìš©ì–´ì˜ ì˜ë¯¸\\n\\n[ì¤‘ë³µ ë°©ì§€ ìš”ì²­]\\në‹¤ìŒ ë‰´ìŠ¤ ì œëª©ë“¤ì€ ì´ë¯¸ ë°ì´í„°ë² ì´ìŠ¤ì— ìˆìŠµë‹ˆë‹¤. ì´ ë‚´ìš©ë“¤ê³¼ ê²¹ì¹˜ì§€ ì•ŠëŠ” ìƒˆë¡œìš´ ë‰´ìŠ¤ë¥¼ ì°¾ì•„ì£¼ì„¸ìš”:\\n{{ $('Code in JavaScript').first().json.excluded_titles }}\\n\\në°˜ë“œì‹œ ìœ„ ëª©ë¡ì— ì—†ëŠ” ìƒˆë¡œìš´ ë‰´ìŠ¤ 1ê±´ì„ ì œê³µí•´ì£¼ì„¸ìš”.\"\n    }\n  ],\n  \"max_tokens\": 3000,\n  \"temperature\": 0.2\n}",
        "options": {}
      },
      "name": "Perplexity AI: Fetch 1 News",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 3,
      "position": [
        384,
        -320
      ],
      "id": "e854b6fb-bb7b-4100-bf80-e1cb20db13aa",
      "credentials": {
        "httpBearerAuth": {
          "id": "H9XmR62z2EIU7Nvq",
          "name": "Bearer Auth account"
        }
      }
    }
  ],
  "pinData": {},
  "connections": {
    "Cron Trigger: 9 AM Daily": {
      "main": [
        [
          {
            "node": "Get row(s) in sheet",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code: Prepare Data for Sheet": {
      "main": [
        [
          {
            "node": "Google Sheets: Add Data",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Google Gemini Chat Model": {
      "ai_languageModel": [
        [
          {
            "node": "AI Agent",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "AI Agent": {
      "main": [
        [
          {
            "node": "critic agent",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet": {
      "main": [
        [
          {
            "node": "Code in JavaScript",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code in JavaScript": {
      "main": [
        [
          {
            "node": "Perplexity AI: Fetch 1 News",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Google Gemini Chat Model1": {
      "ai_languageModel": [
        [
          {
            "node": "critic agent",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "critic agent": {
      "main": [
        [
          {
            "node": "Code: Prepare Data for Sheet",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Google Sheets: Add Data": {
      "main": [
        [
          {
            "node": "Notion: Create Gallery Card",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Perplexity AI: Fetch 1 News": {
      "main": [
        [
          {
            "node": "AI Agent",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": true,
  "settings": {
    "executionOrder": "v1"
  },
  "versionId": "004666b3-e6ca-419f-8526-6a4b207359bb",
  "meta": {
    "templateCredsSetupCompleted": true,
    "instanceId": "2c5c4b763aac75ac86c0599c7a52b2a17496ca308aec82eacfb616d1d76d0267"
  },
  "id": "WJA3jQn05ce56WP4",
  "tags": []
}